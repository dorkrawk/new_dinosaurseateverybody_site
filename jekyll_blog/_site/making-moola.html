<h2 class="post_title">Making Moola</h2>
<div class="post_date">July 11, 2017</div>

<div class="post">
<p>If one listens to enough Ruby related blogs and talks and podcasts they are likely to run in to <a href="https://crystal-lang.org/">Crystal</a>. Have you every thought, “I like Ruby, but I wish is were fast and compiled on LLVM”? Well, that’s Crystal. It’s a <strong>fast language with Ruby inspired syntax</strong>. If the performance benchmarks shown on the Crystal site are even remotely accurate, it’s worth checking out.</p>

<p>I enjoy writing Ruby and I like things that are fast, so I’ve been trying it out. While it is still pre-1.0 it’s been pretty nice to work with. And since it’s a new language, there’s an opportunity to write new libraries (known as “<a href="http://crystalshards.xyz/">Shards</a>” in Crystal).</p>

<p>My first Crystal Shard has been a money handling library, inspired by <a href="https://github.com/RubyMoney/money">Ruby Money</a>, that I call <a href="https://github.com/dorkrawk/moola">Moola</a>. It gives uses the ability to define Money objects and do basic operations and conversions with them.  Here are a few examples:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">money</span> <span class="o">=</span> <span class="no">Moola</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">42_00</span><span class="p">)</span> <span class="c1"># creates a new Moola::Money object</span>
<span class="n">money</span><span class="p">.</span><span class="nf">format</span> <span class="c1"># "$42.00"</span>
<span class="n">money</span><span class="p">.</span><span class="nf">cents</span>  <span class="c1"># 4200</span>
<span class="n">money</span><span class="p">.</span><span class="nf">zero?</span>  <span class="c1"># false</span>
<span class="n">money</span><span class="p">.</span><span class="nf">to_f</span> <span class="c1"># 42.0</span>

<span class="no">Moola</span><span class="o">::</span><span class="no">Money</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">5_00</span><span class="p">)</span> <span class="o">==</span> <span class="no">Moola</span><span class="o">::</span><span class="no">Money</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">5_00</span><span class="p">)</span> <span class="c1"># true</span>
<span class="no">Moola</span><span class="o">::</span><span class="no">Money</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">5_00</span><span class="p">,</span> <span class="s2">"USD"</span><span class="p">)</span> <span class="o">==</span> <span class="no">Moola</span><span class="o">::</span><span class="no">Money</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">5_00</span><span class="p">,</span> <span class="s2">"EUR"</span><span class="p">)</span> <span class="c1"># false</span>

<span class="no">Moola</span><span class="o">::</span><span class="no">Exchange</span><span class="p">.</span><span class="nf">add_conversion</span><span class="p">(</span><span class="no">Moola</span><span class="o">::</span><span class="no">Currency</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s2">"usd"</span><span class="p">),</span> <span class="no">Moola</span><span class="o">::</span><span class="no">Currency</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s2">"cad"</span><span class="p">),</span> <span class="mi">1</span><span class="o">.</span><span class="mi">3</span><span class="p">)</span>
<span class="n">money</span> <span class="o">=</span> <span class="no">Moola</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">1_00</span><span class="p">,</span> <span class="s2">"USD"</span><span class="p">)</span>
<span class="n">money</span><span class="p">.</span><span class="nf">convert_to</span><span class="p">(</span><span class="no">Moola</span><span class="o">::</span><span class="no">Currency</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s2">"cad"</span><span class="p">))</span> <span class="c1"># Moola::Money(1_30, "cad")</span></code></pre></figure>

<p>I don’t have much to say other than it seems like a great language if you like writing Ruby. For a newer language it’s been a joy to work with and it’s fun to build some basic libraries.</p>

<p>If you every find yourself writing Ruby and dealing with money, I encourage you to try out <a href="https://github.com/dorkrawk/moola">Moola</a>.</p>

</div>

<div class="back_to_blog"><a href="../blog"><i class="icon-arrow-left"></i> back to blog</a></div>

